"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(u,i){try{var o=t[u](i),a=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}var _wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_util=require("./util.js"),_util2=_interopRequireDefault(_util),_md=require("./md5.js"),_md2=_interopRequireDefault(_md),_tip=require("./tip.js"),_tip2=_interopRequireDefault(_tip),API_SECRET_KEY="www.mall.cycle.com",TIMESTAMP=_util2.default.getCurrentTime(),SIGN=_md2.default.hex_md5((TIMESTAMP+API_SECRET_KEY).toLowerCase()),wxRequest=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _tip2.default.loading(),t=n.query||{},t.sign=SIGN,t.time=TIMESTAMP,e.next=6,_wepy2.default.request({url:u,method:n.method||"GET",data:t,header:{"Content-Type":"application/json"}});case 6:return r=e.sent,_tip2.default.loaded(),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();module.exports={wxRequest:wxRequest};